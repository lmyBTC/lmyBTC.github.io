å¾æ‚¨æä¾›çš„ deploy.yml æª”æ¡ˆä¾†çœ‹ï¼Œæ‚¨å·²ç¶“æœ‰äº†éå¸¸å¥½çš„é–‹å§‹ï¼é€™å€‹è¨­å®šæª”åŸºæœ¬ä¸Šæ˜¯æ­£ç¢ºçš„ï¼Œåªéœ€è¦æ ¹æ“šæ‚¨çš„å°ˆæ¡ˆçµæ§‹åšä¸€å€‹å°å°çš„èª¿æ•´ï¼Œä»¥ç¢ºä¿ .github/workflows é€™å€‹ç›®éŒ„æœ¬èº«ä¸æœƒè¢«ç™¼ä½ˆåˆ°å…¬é–‹çš„å€‰åº«ä¸­ã€‚

ç­–ç•¥åŸ·è¡Œæ­¥é©Ÿ
å€‰åº«æº–å‚™ï¼š

å€‰åº« A (ç§æœ‰): æ‚¨éœ€è¦ä¸€å€‹ç§æœ‰çš„å€‰åº«ä¾†å­˜æ”¾æ‰€æœ‰åŸå§‹ç¢¼ï¼Œä¾‹å¦‚ source-lmyBTCã€‚æ‚¨ç›®å‰å·¥ä½œå€ lmyBTC.github.io è£¡çš„æ‰€æœ‰æª”æ¡ˆï¼ˆåŒ…å« .md æ–‡ä»¶ã€HTMLã€CSSã€JS ç­‰ï¼‰éƒ½æ‡‰è©²æ”¾åœ¨é€™å€‹ç§æœ‰å€‰åº«ä¸­ã€‚
å€‰åº« B (å…¬é–‹): æ‚¨çš„ lmyBTC/lmyBTC.github.io å€‰åº«ã€‚é€™å€‹å€‰åº«çš„å…§å®¹å°‡æœƒè¢« GitHub Actions å®Œå…¨è¦†è“‹ï¼Œæ‰€ä»¥æ‚¨ä¸éœ€è¦æ‰‹å‹•ç®¡ç†å®ƒã€‚
è¨­å®š Deploy Keyï¼š é€™æ˜¯æœ€é—œéµçš„ä¸€æ­¥ï¼Œç›®çš„æ˜¯æˆæ¬Šç§æœ‰å€‰åº«ï¼ˆå€‰åº« Aï¼‰å¯ä»¥å¯«å…¥å…¬é–‹å€‰åº«ï¼ˆå€‰åº« Bï¼‰ã€‚

ç”¢ç”Ÿ SSH Key: åœ¨æ‚¨çš„æœ¬æ©Ÿé›»è…¦ä¸ŠåŸ·è¡Œ ssh-keygen -t ed25519 -C "gh-actions-deploy" -f gh-actions-deployã€‚é€™æœƒç”¢ç”Ÿ gh-actions-deployï¼ˆç§é‘°ï¼‰å’Œ gh-actions-deploy.pubï¼ˆå…¬é‘°ï¼‰å…©å€‹æª”æ¡ˆã€‚
è¨­å®šå…¬é–‹å€‰åº«: é€²å…¥ lmyBTC/lmyBTC.github.io çš„ Settings > Deploy keysï¼Œé»æ“Š Add deploy keyã€‚å°‡ gh-actions-deploy.pub çš„å…§å®¹è²¼ä¸Šï¼Œæ¨™é¡Œè‡ªè¨‚ï¼ˆä¾‹å¦‚ Actions Deploy Keyï¼‰ï¼Œä¸¦å‹™å¿…å‹¾é¸ Allow write accessã€‚
è¨­å®šç§æœ‰å€‰åº«: é€²å…¥ç§æœ‰å€‰åº«çš„ Settings > Secrets and variables > Actionsï¼Œé»æ“Š New repository secretã€‚å»ºç«‹ä¸€å€‹åç‚º ACTIONS_DEPLOY_KEY çš„ Secretï¼Œä¸¦å°‡ gh-actions-deployï¼ˆç§é‘°ï¼‰æª”æ¡ˆçš„å…§å®¹è²¼ä¸Šã€‚
å»ºç«‹ GitHub Actions Workflowï¼š åœ¨æ‚¨çš„ç§æœ‰å€‰åº«ä¸­ï¼Œå»ºç«‹ .github/workflows/deploy.yml æª”æ¡ˆã€‚æˆ‘å·²å°æ‚¨æä¾›çš„ç‰ˆæœ¬é€²è¡Œäº†å„ªåŒ–ï¼Œæ’é™¤äº†ä¸å¿…è¦çš„æª”æ¡ˆï¼Œä¸¦ç¢ºä¿è·¯å¾‘æ­£ç¢ºã€‚

æˆ‘å°‡ç‚ºæ‚¨å»ºç«‹é€™å€‹æª”æ¡ˆã€‚

ç¨‹å¼ç¢¼è®Šæ›´
é€™æ˜¯åœ¨æ‚¨çš„å°ˆæ¡ˆä¸­å»ºç«‹ deploy.yml çš„å…§å®¹ã€‚è«‹å°‡æ­¤æª”æ¡ˆæ”¾ç½®åœ¨ lmyBTC.github.io/.github/workflows/deploy.yml è·¯å¾‘ä¸‹ï¼ˆå¦‚æœç›®éŒ„ä¸å­˜åœ¨ï¼Œè«‹å»ºç«‹å®ƒï¼‰ã€‚

New file: deploy.yml
+36
 Show full code block 
# GitHub Action: Deploy to GitHub Pages
# This workflow automatically deploys the static content from this private repository
# to the public lmyBTC.github.io repository.

name: Deploy to GitHub Pages

on:
  # Triggers the workflow on push events to the main branch
  push:
    branches:
      - main
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Deploy to lmyBTC.github.io
        uses: peaceiris/actions-gh-pages@v4
        with:
          # The SSH deploy key we added to the repository secrets
          deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }}
          # The target repository (your public GitHub Pages repo)
          external_repository: lmyBTC/lmyBTC.github.io
          # The branch to publish to in the target repository
          publish_branch: main
          # The directory to publish from this repository (root)
          publish_dir: ./
          # Exclude the workflow file itself from being published
          exclude_assets: '.github/'
          # A commit message for the deployment
          commit_message: "ğŸš€ Deploy: ${{ github.event.head_commit.message }}"

å¾ŒçºŒå·¥ä½œæµç¨‹
è¨­å®šå®Œæˆå¾Œï¼Œæ‚¨çš„å·¥ä½œæµç¨‹å°‡æœƒè®Šå¾—éå¸¸ç°¡å–®ï¼š

åœ¨æ‚¨çš„ç§æœ‰å€‰åº«ä¸­é€²è¡Œæ‰€æœ‰ç·¨è¼¯ã€å¯«ä½œã€ä¿®æ”¹ã€‚
å®Œæˆå¾Œï¼Œå°‡è®Šæ›´ git push åˆ°ç§æœ‰å€‰åº«çš„ main åˆ†æ”¯ã€‚
GitHub Actions æœƒè‡ªå‹•è¢«è§¸ç™¼ï¼Œä¸¦åœ¨å¹¾åˆ†é˜å…§å°‡æœ€æ–°çš„ç¶²ç«™å…§å®¹éƒ¨ç½²åˆ°æ‚¨å…¬é–‹çš„ lmyBTC.github.io å€‰åº«ã€‚
æ‚¨å†ä¹Ÿä¸éœ€è¦æ‰‹å‹•å»ç®¡ç†å…¬é–‹å€‰åº«äº†ï¼é€™å€‹è‡ªå‹•åŒ–æµç¨‹å®Œå…¨ç¬¦åˆæ‚¨çš„æ–¹æ¡ˆäºŒéœ€æ±‚ï¼Œæ—¢å®‰å…¨åˆé«˜æ•ˆã€‚